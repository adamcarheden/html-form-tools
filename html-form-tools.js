(function(b,c){'object'==typeof exports&&'object'==typeof module?module.exports=c():'function'==typeof define&&define.amd?define('html-form-tools',[],c):'object'==typeof exports?exports['html-form-tools']=c():b['html-form-tools']=c()})(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var f=c[d]={i:d,l:!1,exports:{}};return a[d].call(f.exports,f,f.exports,b),f.l=!0,f.exports}var c={};return b.m=a,b.c=c,b.i=function(d){return d},b.d=function(d,f,g){b.o(d,f)||Object.defineProperty(d,f,{configurable:!1,enumerable:!0,get:g})},b.n=function(d){var f=d&&d.__esModule?function(){return d['default']}:function(){return d};return b.d(f,'a',f),f},b.o=function(d,f){return Object.prototype.hasOwnProperty.call(d,f)},b.p='',b(b.s=5)}([function(a,b){'use strict';b.a=function(j,l){let m;switch(2>arguments.length&&(l=0),typeof j){case'number':m=j.toString();break;case'symbol':case'string':if(m=j.toString(),!m.match(/^\s*\d+(\.\d*)?\s*$/))return 2>arguments.length?j:{value:j,cursorPos:l};let r=m.substring(0,l),s=m.substring(l).trim();0===r.trim().length&&(l-=r.length,r=''),m=r+s;break;default:return 2>arguments.length?j:{value:j,cursorPos:l};}var n=m.match(/\./)?m.split(/\./,2):[m];for(var o=[],p=0,q=0;q<n[0].length;q++){let r=n[0].length-q-1;0!==q&&0==q%3&&(o.unshift(','),r<l&&p++),o.unshift(n[0].charAt(r))}return l+=p,n[0]=o.join(''),m=n.join('.'),2>arguments.length?m:{value:m,cursorPos:l}};b.b=function(j,l){var m=j.replace(/,/g,'');return 2<=arguments.length?(l-=j.substring(0,l).replace(/[^,]/g,'').length,{value:m,cursorPos:l}):m};b.c=function(j,l,m,n=[]){return Object.keys(j).forEach(function(o){if(-1!==n.indexOf(o))o in l||(l[o]=j[o]);else{if(o in l)throw new Error(`You defined the callback '${o}', but '${m}' also defines that callback`);l[o]=j[o]}}),l};b.d=function(j,l,m){let n;return n=l in j&&'function'==typeof j[l]?function(o,p){var q=m(o,p);return j[l](q.value,q.cursorPos)}:m,n}},function(a,b){'use strict';const d={unformat:!1,validate:!1,format:!1,sync:!1,invalid:!1,intermediate:!1,valid:!1},f={HTMLInputElement:{keypress:function(l){return this.debug(`keypress: value='${this.input.value}'`),!!this.ignoreKey(l)||void this.validateAndFormat(l)},input:function(l){this.debug(`input: value='${this.input.value}'`),this.validateAndFormat(l)},blur:function(){this.debug(`blur: value='${this.input.value}'`),this.sync()}}};var g={defaultValue:null,ignoreCtrl:!0,ignoreAlt:!0,debug:!1},h=function(l){if(!('key'in l))throw new Error(`predictInput called on event of type '${l.type}', which has no value 'key'. You probably only want to call this on KeyEvents`);var m=l.target.value.slice(0,l.target.selectionStart),n=l.target.value.slice(l.target.selectionEnd),o=`${m}${l.key}${n}`;return o};b.a=class{constructor(l,m,n){if('string'!=typeof l)this.input=l;else if(this.input=document.getElementById(l),!this.input&&(this.input=document.querySelector(l),!this.input))throw new Error(`Failed to find element by id or query selector '${l}'`);if('object'!=typeof this.input)throw Error(`Expected an object or the name of an element to manage, but got a '${typeof this.input}'`);if(!(this.input instanceof HTMLInputElement))throw Error(`Expected an HTMLInputElement, got a '${this.input.constructor.name}'`);if('format'in m&&!('unformat'in m)&&console.warn(`You defined the format callback but not the unformat callback. That probably won't work well.`),'unformat'in m&&!('format'in m)&&console.warn(`You defined the unformat callback but not the format callback. That probably won't work well.`),'format'in m||'unformat'in m||'validate'in m||console.warn(`You didn't define the format/unformat callbacks nor the validate callback. This module doesn't really do anything if you haven't defined at least one of those.`),this.callbacks={},'undefined'==typeof m&&(m={}),'object'!=typeof m)throw new Error(`callbacks should be an object, not a ${typeof m}`);if(Object.keys(d).forEach((o)=>{this.callbacks[o]=o in m?m[o]:d[o]}),Object.keys(m).forEach(function(o){o in d||console.warn(`Unknown callback: '${o}'`)}),this.opts={},'undefined'==typeof n&&(n={}),'object'!=typeof n)throw new Error(`opts should be an object, not a ${typeof n}`);Object.keys(g).forEach((o)=>{this.opts[o]=o in n?n[o]:g[o]}),null!==this.opts.defaultValue&&(this.input.value=this.opts.defaultValue),this.validateAndFormat(),this.inputType=this.input.constructor.name,Object.keys(f[this.inputType]).forEach((o)=>{this.input.addEventListener(o,(p)=>{f[this.inputType][o].bind(this)(p)})})}set(l){this.input.value=l,this.validateAndFormat()}unformat(l,m){return'undefined'==typeof l&&(l=this.input.value),this.callbacks.unformat?this.callbacks.unformat(l,m):l}unformatted(l){'undefined'==typeof l&&(l=this.input.value);var m=this.callbacks.unformat?this.callbacks.unformat(l):l;return'object'==typeof m?m.value:m}format(l,m){return this.callbacks.format?this.callbacks.format(l,m):l}validate(l){return'undefined'==typeof l&&(l=this.unformatted(this.input.value)),!this.callbacks.validate||this.callbacks.validate(l)}sync(l){'undefined'==typeof l&&(l=this.unformatted(this.input.value));try{if(this.callbacks.sync&&this.validate(l))return this.callbacks.sync(l)}catch(m){this.debug(`Refusing to sync invalid value ${l}`)}}invalid(l,m,n){this.callbacks.invalid&&this.callbacks.invalid(l,m,n,this.input)}intermediate(l,m,n){this.callbacks.intermediate&&this.callbacks.intermediate(l,m,n,this.input)}valid(l,m,n){this.callbacks.valid&&this.callbacks.valid(l,m,n,this.input)}ignoreKey(l){if(!('key'in l))throw new Error(`ignoreKey should only be called for KeyEvents. Called on event of type ${l.type}`);return(1<l.key.length||this.opts.ignoreCtrl&&l.ctrlKey||this.opts.ignoreAlt&&l.altKey)&&(this.debug({ignoring:l}),!0)}validateAndFormat(l){var m='',n,o=this.input.selectionStart;l&&l.key?(m=this.input.value,n=h(l),o++):n=this.input.value;var p=this.unformat(n,o);'object'!=typeof p&&(p={value:p,cursorPos:!1});try{if(!this.validate(p.value))this.debug(`'${p.value}': acceptable intermediate value, formatting delayed`),this.intermediate(p.value,m,n);else{var q=this.format(p.value,p.cursorPos);'object'!=typeof q&&(q={value:q,cursorPos:!1}),this.debug(`'${p.value}' (cursorPos=${p.cursorPos}) is valid, formatted as '${q.value}' (cursorPos=${q.cursorPos})`),l&&l.preventDefault(),this.input.value=q.value,q.cursorPos&&this.input.setSelectionRange(q.cursorPos,q.cursorPos),this.valid(p.value,m,n)}}catch(r){return this.debug(`Invalid value '${p.value}': "${r.message}". We'll prevent input if possible.`),l&&l.preventDefault(),l&&'keypress'===l.type||this.invalid(p.value,m,n),!1}return!0}debug(l){this.opts.debug&&console.log(l)}}},function(a,b,c){'use strict';var d=c(0),f=c(1);b.a=function(g,h={},j={}){let l=JSON.parse(JSON.stringify(j));'commafy'in l||(l.commafy=!0);var m=!1;'MaxMantissaDigits'in l&&(m=l.MaxMantissaDigits,delete l.MaxMantissaDigits);var n=!1;'MaxDecimalDigits'in l&&(n=l.MaxDecimalDigits,delete l.MaxDecimalDigits);var o=!1,p=!1;return l.commafy?(o=c.i(d.d)(h,'format',function(q,r){return c.i(d.a)(q,r)}),p=c.i(d.d)(h,'unformat',function(q,r){return c.i(d.b)(q,r)})):('format'in h&&(o=h.format),'unformat'in h&&(p=h.unformat)),delete l.commafy,new f.a(g,c.i(d.c)(h,{validate:function(q){if(q=q.toString(),0===q.length)return!1;var r=q.match(/^(\d*)((\.)(\d*))?$/);if(!r)throw new Error('Must be numeric (with out without a decimal)');if(m&&r[1]&&r[1].length>m)throw new Error(`Mantissa part must be no more than '${m}' digits`);if(n&&r[4]&&r[4].length>n)throw new Error(`Decimal part must be no more than '${n}' digits`);return r[3]&&!r[4]?!1:!0},format:o,unformat:p},'FloatInput',['format','unformat']),l)}},function(a,b,c){'use strict';var d=c(0),f=c(2);b.a=function(g,h={},j={}){let l=JSON.parse(JSON.stringify(j));return'MaxDecimalDigits'in l||(l.MaxDecimalDigits=2),c.i(f.a)(g,c.i(d.c)(h,{unformat:function(m,n){m=m.toString();var o=m.replace(/^\$+/,''),p=n,q=m.length-o.length;return p-=Math.min(n,q),{value:o,cursorPos:p}},format:function(m,n){return{value:'$'+m,cursorPos:!1!==n&&n+1}}},'DollarInput'),l)}},function(a,b,c){'use strict';var d=c(0),f=c(1);b.a=function(g,h={},j={}){let l=JSON.parse(JSON.stringify(j));'commafy'in l||(l.commafy=!0);var m=!1;'MaxDigits'in l&&(m=l.MaxDigits,delete l.MaxDigits);var n=!1,o=!1;return l.commafy?(n=c.i(d.d)(h,'format',function(p,q){return c.i(d.a)(p,q)}),o=c.i(d.d)(h,'unformat',function(p,q){return c.i(d.b)(p,q)})):('format'in h&&(n=h.format),'unformat'in h&&(o=h.unformat)),delete l.commafy,new f.a(g,c.i(d.c)(h,{validate:function(p){if(!p.match(/^[0-9]*$/))throw new Error('must be a integer');if(m&&p.length>m)throw new Error(`Must be at most ${m} digits`);return!0},format:n,unformat:o},'IntegerInput'),l)}},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(0),f=c(1),g=c(4),h=c(2),j=c(3);b['default']={ManagedInput:function(l,m,n){return new f.a(l,m,n)},IntegerInput:g.a,FloatInput:h.a,DollarInput:j.a,util:{commafy:d.a,uncommafy:d.b}}}])});