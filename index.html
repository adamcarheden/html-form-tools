<!DOCTYPE html>                                                                                               
<html>
<head>
<meta charset="utf-8">
<title>html-input-tools</title>
<script type='text/javascript' src='html-input-tools.js'></script>

<script>
	window.addEventListener('load', function(event) {
		var minput = new window['html-input-tools'].ManagedInput('money', {
			unformat: function(value, cursorPos) {
				var unf = value.replace(/^\$*/,'')
				var cp = cursorPos
				var ext = value.length - unf.length
				cp -= Math.min(cursorPos, ext)
				return { value: unf, cursorPos: cp }
			},
			validate: function(value) {
				if (value.match(/^\d+(\.\d+)?$/)) return true
				if (value.length === 0 || value.match(/^\d*\.$/)) return false;
				throw new Error("Invalid value '"+value+"'");
			},
			format: function(value, cursorPos) {
				var res = {value: '$'+value, cursorPos: (cursorPos === false) ? false : cursorPos+1 }
				return res
			},
			sync: function(value) {
				console.log({sync: value});
			},
			invalid: function(ov,nv,uf,raw) { console.log({nobueno: nv}) }, 
			valid: function(ov,nv,uf,raw) { console.log({bueno: nv}) }, 
			intermediate: function(ov,nv,uf,raw) { console.log({asiasi: nv}) }, 
		}, {debug: false});
	});
</script>

</head>
<body>
	<h1>HTML Input Tools</h1>
	Integer: <input id='int'/><br/>
	Decimal: <input id='dec'/><br/>
	Money: <input id='money' value='27.5'/><br/>
</body>
</html>

