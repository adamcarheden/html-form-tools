<!DOCTYPE html>                                                                                               
<html>
<head>
<meta charset="utf-8">
<title>html-input-tools</title>
<script type='text/javascript' src='html-input-tools.js'></script>

<script>
	window.addEventListener('load', function(event) {
		var minput = new window['html-input-tools'].ManagedInput('money', {
			format: function(value, cursorPos) {
				console.log('Formatting '+value+" ("+cursorPos+")");
				return {value: '$'+value, cursorPos: (cursorPos === false) ? cursorPos+1 : false }
			},
			unformat: function(value, cursorPos) {
				var unf = value.replace(/^\$*/,'')
				var cp = cursorPos
				var ext = value.length - unf.length
				cp -= Math.min(cursorPos, ext)
				return { value: unf, cursorPos: cp }
			},
			validate: function(value) {
				if (value.match(/^\d+(\.\d+)?$/)) return true
				if (value.length === 0 || value.match(/^\d*\.$/)) return false;
				throw new Error("Invalid value '"+value+"'");
			},
		}, {debug: true});
	});
</script>

</head>
<body>
	<h1>HTML Input Tools</h1>
	Integer: <input id='int'/><br/>
	Decimal: <input id='dec'/><br/>
	Money: <input id='money'/><br/>
</body>
</html>

